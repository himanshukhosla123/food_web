<!DOCTYPE html>
<html>
<head>
    {# Meta #}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Cart</title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="shortcut icon" type="image/png" href="{% static 'assets/ico/favicon.png"/>

    {# CSS  #}
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="/assets/css/AdminLTE.min.css">
    <link rel="stylesheet" href="/assets/css/skin-blue.min.css">
    <link rel="stylesheet" href="/assets/css/select2.min.css"/>
    <link rel="stylesheet" href="/assets/fonts/fonts.googleapis.com.css"/>
    <link rel="stylesheet" href="/assets/css/ace.min.css" class="ace-main-stylesheet"
          id="main-ace-style"/>
    <link rel="stylesheet" type="text/css" href="/assets/css/cart.css">
    <link rel="stylesheet" href="/custom-auth/css/login.css">
    <link rel="stylesheet" href="/assets/css/main.css">
    <style>

        .cart_summary textarea {
            resize: none;
            margin: 10px 0;
        }

        form input[type="text"] {
            text-transform: lowercase;
        }

        .menu_card {
            transform: translateY(0) scale(0.96);
        }

        .navbar-nav > li,
        .navbar-nav a {
            height: 50px !important;
            vertical-align: middle;
            border: none !important;
        }

        .main-sidebar {
            position: fixed;
            overflow-x: hidden;
            overflow-y: scroll !important;
            top: 0;
            bottom: 0;
            height: 5px;
        }

        .main-sidebar::-webkit-scrollbar-track {
            -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            background-color: #222d32;
        }

        .main-sidebar::-webkit-scrollbar {
            width: 12px;
            background-color: #222d32;
        }

        .main-sidebar::-webkit-scrollbar-thumb {
            border-radius: 10px;
            -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, .3);
            background-color: #222d32;
        }

        .content-wrapper {
            overflow-x: hidden;
            overflow-y: scroll;
            top: 0;
            bottom: 0;
            padding-bottom: 50px;
            margin-top: 50px !important;
        }

        .form-error {
            background: rgba(255, 255, 255, 0.5);
            color: white;
            margin-bottom: 0.5em;

            display: none;
        }

        .form-error i {
            color: red;
        }

        .carousel-control.left, .carousel-control.right {
            background: none;
        }

        .price {
            float: right
        }

        .card {
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
        }

        .product-description {
            padding: 5px;
        }

        * {
            box-sizing: border-box;
        }

        .item {
            margin: 1em;
        }

        .carousel-control {
            width: 3%
        }

        .nav-tabs > li > a {
            border: none;
            font-size: 1.3em;
        }

        .nav > li > a:focus, .nav > li > a:hover {
            border: none;
            background: transparent;
        }

        .nav-tabs > li.active > a, .nav-tabs > li.active > a:focus, .nav-tabs > li.active > a:hover {
            border: none;
        }

        .nav-tabs > li > a:after {
            content: '';
            display: block;
            height: 3px;
            width: 0px;
            background: transparent;
            transition: width .5s ease, background-color .5s ease;

            position: absolute;
            left: 0;
            margin-top: 8px;
        }

        .nav-tabs > li.active > a:after, .nav-tabs > li.active > a:focus:after, .nav-tabs > li.active > a:hover:after {
            width: 100%;
            background: #008ecc;
        }

        .carousel img {
            width: 100%;
            height: 190px;
        }

        .fab-action-button {
            background-image: url("/help.png");
            background-size: 100%;
            width: 75px;
            height: 75px;
            background-color: transparent;
            border-radius: 50%;
            box-shadow: none;
        }

    </style>

    {# JS #}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
    <script src="/assets/js/ace-extra.min.js"></script>
    <script src="/assets/js/cart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.js"></script>
    <script>
        var product_list = [];
        onload = function () {
            var $input = $('#refresh');
            $input.val() == 'yes' ? location.reload(true) : $input.val('yes');
        };

        $(document).ready(function () {
            $.ajax({
                type: 'GET',
                url: '/api/products/',
                success: function (data) {
                    $.each(data, function (i, product) {
                        product_list.push(product);
                    });
                }
            });

            $('#search').keyup(function () {
                $('#search_result').find('ul').empty();

                var search_term = $(this).val();

                var search = search_term.toLowerCase();
                var array = jQuery.grep(product_list, function (value, i) {
                    return value.title.toLowerCase().indexOf(search) >= 0;
                    //console.log(value.title);
                });
                $.each(array, function (i, arrq) {
                    $('#search_result').find('ul').append("<li class='list-group-item'><a href='http://35.154.102.64/products/" + arrq.id + "'>" + arrq.title + "</a></li>");
                });
            });
        });
    </script>
</head>
<body class="hold-transition skin-blue sidebar-mini" style="overflow:hidden">
<div class="wrapper">
    <input type="hidden" id="refresh" value="no">

    <header class="main-header">

        <div class="logo" style="position: fixed">
            <span class="logo-mini"><b>F</b></span>
            <span class="logo-lg"><b>Food</b>Cham</span>
        </div>

        <nav class="navbar navbar-fixed-top" role="navigation">

            <a href="#" class="sidebar-toggle hide_sidebar_button" data-toggle="offcanvas" role="button">
                <span class="sr-only">Toggle navigation</span>
            </a>

            <div class="navbar-custom-menu">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            {% if request.user|stringformat:"s" == "AnonymousUser" %}
                                <span class="hidden-xs">Welcome Guest</span>
                            {% else %}
                                <span class="hidden-xs">Welcome {{ request.user.users_name|title }}</span>
                            {% endif %}
                        </a>
                    </li>
                    <li>
                        <a href="/cart">
                            <i class="fa fa-shopping-cart" style="padding-right:8px; transform:scale(1.6)"></i>
                            Cart
                            <span id='cart-count-badge'
                                  style="padding-left:5px; font-weight:bold">{{ request.session.cart_item_count }}</span>
                        </a>
                    </li>
                    <li>
                        {% if request.user.is_authenticated %}
                            <a href="javascript:void(0)" id="logout">Logout</a>
                        {% else %}
                            <a href="/login" id="login">Login</a>
                        {% endif %}
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <aside class="main-sidebar">

        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar toggled">

            <!-- Sidebar user panel (optional) -->
            <div class="user-panel">
                <div class="pull-left image mascot-img">
                    <img src="/assets/img/food_champ.png" class="img-circle" alt="User Image">
                </div>
                <div class="pull-left info">
                    <p id="wish">Good Afternoon</p>

                    {% if request.user|stringformat:"s" == "AnonymousUser" %}
                        <i class="fa fa-circle text-success"></i> Guest
                    {% else %}
                        <i class="fa fa-circle text-success"></i> {{ request.user.users_name|title }}
                    {% endif %}
                </div>
            </div>

            <!-- search form (Optional) -->
            <form action="#" method="get" class="sidebar-form">
                <div class="input-group">
                    <input type="text" name="q" class="form-control" id="search" autocomplete="off"
                           placeholder="Search...">


                    <span class="input-group-btn">
                            <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i
                                    class="fa fa-search"></i></button>
                        </span>
                </div>
            </form>
            <!-- /.search form -->
            <div id="search_result">
                <ul class="list-group"></ul>
            </div>

            <!-- Sidebar Menu -->
            <ul class="sidebar-menu hide_sidebar">
                <!-- Optionally, you can add icons to the links -->
                <li><a href="/home"><i class="fa fa-link"></i> <span>Home</span></a></li>
                <li><a href="/categories"><i class="fa fa-link"></i> <span>Categories</span></a></li>
                <li class="treeview">
                    <a href="#"><i class="fa fa-link"></i> <span>Menu</span> <i
                            class="fa fa-angle-left pull-right"></i></a>
                    <ul class="treeview-menu">
                        {% for category in categories %}
                            {% if not category.meal_category %}

                                <li><a href='{{ category.get_absolute_url }}'>{{ category }}</a></li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                </li>
                <!--
                     <li class="treeview">
                         <a href="#"><i class="fa fa-link"></i> <span>Customization</span>
                             <i class="fa fa-angle-left pull-right"></i>
                         </a>
                         <ul class="treeview-menu">
                             <li><a href="#">Pizza</a></li>
                             <li><a href="#">Burgers</a></li>
                         </ul>
                     </li>
                     -->
                {% if request.user.is_authenticated %}
                    <li class="treeview">
                        <a href="/wishlist/{{ wishlist_id }}">
                            <i class="fa fa-link"></i> <span>Wishlist</span>
                        </a>
                    </li>
                {% else %}
                    <li class="treeview">
                        <a href="/login">
                            <i class="fa fa-link"></i> <span>Wishlist</span>
                        </a>
                    </li>
                {% endif %}

                <li class="treeview">
                    <a href="/feedback">
                        <i class="fa fa-link"></i> <span>Feedback</span>

                    </a>
                </li>
                {% if request.user.is_authenticated %}

                    <li class="treeview">
                        <a href="/bill">
                            <i class="fa fa-link"></i> <span>Generate Bill</span>
                        </a>
                    </li>

                {% endif %}

            </ul><!-- /.sidebar-menu -->
        </section>
        <!-- /.sidebar -->
    </aside>

    <div class="content-wrapper">

        {% if  object.cartitem_set.count < 1 %}
            <section class="content center" style="background-color:white;">
                <h1 class="text-primary" style="font-size:50px;">There is nothing in your <br>cart. <br>Please add
                    something.</h1>
                <img src="/assets/img/error/error-01.jpg" class="img-responsive"
                     style="display:inline-block;" alt="No Internet connection">
            </section>
        {% else %}
            <section class="content-header">
                <div class="container-fluid cart">
                    <div class="row">


                        <div class="cart_title jumbotron">
                            <h3>

                                <b>
                                    <h2 style="color: black; background-color:rgba(0,0,0,0.1);padding: 10px"
                                        align="center"><b>
                                        Your Orders</b></h2>
                                </b>

                            </h3>
                        </div>

                        <div class="load-test">
                        </div>

                        <div class="row">
                            <div class="col-md-8 col-sm-8" style="margin-left:3%;">
                                <div class="table-responsive">

                                    {% if not empty %}
                                        <table class="table table-striped order_table">
                                            <thead>
                                            <tr style="color: black; background-color:rgba(34,45,50,0.5);padding: 10px"
                                                align="center">
                                                <td></td>
                                                <td colspan="2"><h4><b>Product Name</b></h4></td>
                                                <td class="cart_price"><h4><b>Quantity</b></h4></td>
                                                <td class="cart_quantity"><h4><b>Subtotal</b></h4></td>
                                                <td class="cart_subtotal"><h4><b>Remove</b></h4></td>
                                                <td><h4><b>Edit</b></h4></td>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            {% for item in object.cartitem_set.all %}

                                                <tr id='item-{{ item.item.id }}' style="border-bottom:2px solid black;">
                                                    <td></td>
                                                    <td colspan="1">
                                                        <a href="{{ item.item.get_absolute_url }}"><b><h4
                                                                style="color: #df5e16!important"
                                                                class="cart_product">{{ item.item.get_title }}</h4></b></a>
                                                        {% if item.extra_add_ons == "No Add-Ons Added" %}

                                                            No Add Ons Added
                                                        {% else %}

                                                            Add Ons Added : {{ item.extra_add_ons }}
                                                        {% endif %}
                                                        <br>
                                                        {% if not item.add_on_price == 0.00 %}
                                                            Add On Price {{ item.add_on_price }}
                                                        {% endif %}
                                                    </td>

                                                    <td>
                                                        <form action="." method="GET">
                                                    <td class="cart_quantity">
                                                        {% if not item.extra_add_ons == 'No Add-Ons Added
                                                            <input type="hidden" id='add-ons' name="add-ons"
                                                                   value="{{ item.extra_add_ons }}">
                                                        {% endif %}
                                                        <input type="hidden" name="item" value="{{ item.item.id }}">

                                                        <div><b>{{ item.quantity }}</b></div>


                                                        <input type="submit" class="btn-update btn" value="Update Item"
                                                               style="display:none;"/>
                                                    </td>
                                                    </form>
                                                    </td>
                                                    <td id='item-line-total-{{ item.item.id }}'
                                                        class="cart_subtotal"><b>{{ item.line_item_total }}</b>
                                                    </td>
                                                    <td class="text-center">
                                                        <a href="{{ item.remove }}">
                                                        <span class="glyphicon glyphicon-remove-circle cart_item_remove"
                                                              aria-hidden="true"
                                                              style="transform:scale(1.5);color: red"></span>
                                                        </a>
                                                    </td>

                                                    <td class="text-center">
                                                        <a href="{{ item.item.get_absolute_url }}"><span
                                                                class="fa fa-pencil"
                                                                style="transform:scale(1.5);color: #ff6600"></span></a>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                            </tbody>
                                        </table>
                                    {% endif %}
                                </div>
                            </div>
                            {% if not empty %}
                                <div class="col-md-3 col-xs-10 col-sm-3 cart_summary">
                                <!--
                                <div class="row">
                                    <div class="row"
                                         style="width: 100%; margin: 0; box-shadow: 0px 4px 4px 0px rgba(100,100,100,0.4);">
                                        <a class="btn discount_btn" role="button" data-toggle="collapse"
                                           href="#discount_field" aria-expanded="false" aria-controls="collapseExample"
                                           style="color:#337ab7;width: 100%;">
                                            Apply Discount Code
                                            <span class="glyphicon glyphicon-menu-down"
                                                  style="padding-left: 5px"></span>
                                        </a>
                                        <div class="collapse" id="discount_field">
                                            <div class="well"
                                                 style="border:0px; padding-top: 10px; padding-left: 12px; background-color:transparent; box-shadow:0px 0px 0px 0px;">
                                                <form class="form-inline">
                                                    <div class="form-group">
                                                        <input type="text" placeholder="Enter Discount Code"
                                                               style="padding: 5%;">
                                                    </div>
                                                    <button type="submit" class="btn btn-primary"
                                                            style=" border-radius: 0">
                                                        Apply Discount
                                                    </button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                -->

                                <div class="col-xs-12 center">
                                    <h4 class="center">Cooking instructions?</h4>


                                    <input id='message-box' name="comments" class="form-control" id=""
                                           placeholder="Anything Special ?"
                                           style="margin-bottom:5px;">


                                </div>


                                <div class="row">
                                    <div>
                                        <!--                                        <table class="table summary_table">-->
                                        <!--                                            <thead>-->
                                        <h3 align="center" style="padding-left:8px;">SUMMARY</h3>

                                        <!--                                            </thead>-->
                                        <!--                                            <tbody>-->
                                        <ul class="list-group" style="margin-bottom: 0px;">
                                            <li class="list-group-item">
                                                        <span id='subtotal'
                                                              class="badge"> Rs {{ object.subtotal }} </span>
                                                Subtotal
                                            </li>
                                            <li class="list-group-item">
                                                <span id='total_tax-sgst'
                                                      class="badge"> Rs {{ object.sgst_total }} </span>
                                                SGST(@2.5%)
                                            </li>
                                            <li class="list-group-item">
                                                <span id='total_tax-cgst'
                                                      class="badge">Rs {{ object.cgst_total }} </span>
                                                CGST(@2.5%)
                                            </li>

                                            <li class="list-group-item" style="font-size:120%; padding-top: 6%">
                                                <span id='cart_total' class="badge"
                                                      style="font-size: 120%; background-color: transparent; color: #000;">Rs {{ object.total }} </span>
                                                <strong>TOTAL </strong>
                                            </li>

                                        </ul>
                                        <!--                                            </tbody>-->
                                        <!--                                        </table>-->
                                    </div>
                                </div>




                                <div class="row">
                                    <!-- checkout button-->
                                    <div class="checkout_div">
                                        <!-- trigger for login/registeration modal if not logged in-->

                                        {% if is_table_selected %}
                                            {% if not request.user.is_authenticated %}
                                                <button class="btn btn-success checkout_btn" data-toggle="modal"
                                                        data-target="#register-modal" value="CHECKOUT">ORDER
                                                </button>
                                                <!-- trigger for comfirmation snackbar if user logged in -->
                                            {% else %}
                                                <button class="btn btn-success checkout_btn snackbar-btn"
                                                        value="CHECKOUT"
                                                        onclick="showMessage()">ORDER
                                                </button>
                                            {% endif %}
                                        {% else %}
                                            <a href="/">
                                                <button class="btn btn-success checkout_btn">Please Select The Table
                                                </button>
                                            </a>
                                        {% endif %}
                                    </div>
                                </div>{% endif %}
                            </div>
                        </div>
                    </div>
                </div>

                {% if request.user.is_authenticated and wishlist %}
                    <div class="container-fluid">
                        <div class="">
                            <h2 style="margin-left:3%;">Wishlist <span class="pull-right" style="font-size:16px;"><a
                                    href="#">View all <i class="fa fa-arrow-right"></i></a></span></h2>
                            <div id="carousel2" class="carousel slide" data-ride="carousel">

                                <!-- Wrapper for slides -->
                                <div class="carousel-inner" role="listbox">
                                    <div class="item active">
                                        <div class="container-fluid">
                                            <div class="">

                                                {% for i in wishlist|slice:":3" %}
                                                    <div class="col-md-4">
                                                        <div class="card">
                                                            <div class="img-thumb">
                                                                <a href="{{ i.get_absolute_url }}"><img
                                                                        src="{{ i.get_image_url }}"
                                                                        class="img-responsive"></a>
                                                            </div>
                                                            <div class="product-description">
                                                                <a href="{{ i.get_absolute_url }}"><h4>{{ i }}<span
                                                                        class="price">Rs {{ i.price }}</span></h4></a>

                                                            </div>
                                                        </div>
                                                    </div>

                                                {% endfor %}

                                            </div>
                                        </div>

                                        </br><br/>
                                    </div>
                                    <div class="item">
                                        <div class="container-fluid">
                                            <div class="">
                                                {% for i in wishlist|slice:"3:5" %}
                                                    <div class="col-md-4">
                                                        <div class="card">
                                                            <div class="img-thumb">
                                                                <a href="{{ i.get_absolute_url }}"><img
                                                                        src="{{ i.get_image_url }}"
                                                                        class="img-responsive"></a>
                                                            </div>
                                                            <div class="product-description">
                                                                <a href="{{ i.get_absolute_url }}"><h4>{{ i }}<span
                                                                        class="price">Rs {{ i.price }}</span></h4></a>

                                                            </div>
                                                        </div>
                                                    </div>

                                                {% endfor %}

                                                <!--                                                 <div class="col-md-4">
                                                    <div class="card">
                                                        <div class="img-thumb">
                                                            <a href="/wishlist/{{ wishlist_id }}"><img
                                                                    src="https://d30y9cdsu7xlg0.cloudfront.net/png/101501-200.png"
                                                                    class="img-responsive"></a>
                                                        </div>
                                                        <div class="product-description">
                                                            <a href="/wishlist/{{ wishlist_id }}"><h4>Click To See items
                                                                in your wishlist</h4></a>

                                                        </div>
                                                    </div>
                                                </div> -->

                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <!-- Controls -->
                                <a class="left carousel-control" href="#carousel2" role="button" data-slide="prev">
                                    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="right carousel-control" href="#carousel2" role="button" data-slide="next">
                                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                        </div>
                    </div>
                {% endif %}
            </section>
        {% endif %}

        <div id="snackbar">
            Do you want to confirm your order?
            <span style="float:right">
                <form action="" id="order-submit">
                    <button class="btn-materialize" type="submit" name="action" value="yes">YES</button>
                    <a href="javascript:void(0)" class="btn-no" type="submit" name="action" value="no">NO</a>
                </form>
            </span>
        </div>

        <div class="fab">
            <a class="fab-action-button" href="javascript:void(0)" id='fab-help' class="fab-buttons__link">
            </a>
        </div>

    </div>
</div>
</body>
<link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css" rel="stylesheet">
<link href="/plugins/offline/offline-theme-dark.css" rel="stylesheet">
<link href="/plugins/offline/offline-language-english.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/offline-js/0.7.19/offline.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-sweetalert/1.0.1/sweetalert.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fuelux/3.16.1/js/fuelux.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.16.0/jquery.validate.min.js"></script>
<script src="/assets/js/additional-methods.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.maskedinput/1.4.1/jquery.maskedinput.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
<script src="/assets/js/ace-elements.min.js"></script>
<script src="/assets/js/ace.min.js"></script>
<script src="/assets/js/app.min.js"></script>
<script>

    $(".content-wrapper").css("max-height", $(window).height() + "px");

    function showMessage() {
        var x = document.getElementById("snackbar");
        document.getElementById("snackbar").innerHTML = 'Do you want to confirm your order?\n' +
            ' <span style="float:right">\n' +
            '<form action="" id="order-submit">\n' +
            '<button class="btn-materialize" type="submit" name="action" id="order-placed-btn" value="yes">Yes</button>\n' +
            '<a href="#" class="btn-no" type="submit" name="action" value="no">NO</a>\n' +
            '</form>\n' +
            '</span>';
        x.className = "show";

        $('.btn-no').click(function (e) {
            e.preventDefault();
            $('#snackbar').removeClass('show');
        });

        hasclicked = false;
        $('#order-submit').submit(function (e) {
            if (hasclicked) {

            } else {
                hasclicked = true;
            }
        });
        $(".sidebar-menu").css("font-size", "15px");
        var cart_message = $("#message-box").val();

        if (cart_message === "") {
            return false;
        }

        var data = {
            csrfmiddlewaretoken: document.getElementsByName('csrfmiddlewaretoken')[0].value,
            cart_message: cart_message
        };

        $.ajax({
            type: "POST",
            url: "/cart_message",
            data: data,
            success: function (data) {
                console.log(data)
            },
            error: function (response, error) {
                console.log(error);
            }
        });
    }

    function wish_msg() {

        var data = [
            [0, 12, "Good Morning"],
            [12, 18, "Good Afternoon"],
            [18, 24, "Good Evening"]
        ];
        var hr = new Date().getHours();

        for (var i = 0; i < data.length; i++) {
            if (hr >= data[i][0] && hr <= data[i][1]) {
                $("#wish").html(data[i][2]);
                break;
            }
        }
    }

    function updateCartItemCount() {
        var badge = $("#cart-count-badge");
        $.ajax({
            type: "GET",
            url: "/cart_count",
            success: function (data) {
                badge.text(data.count);
            },
            error: function (response, error) {
                console.log(response);
                console.log(error);
            }
        })
    }

    $(document).ready(function () {

        wish_msg();
        updateCartItemCount();

        $('#fab-help').on('click', function () {
            swal({
                    title: "Need Steward Help?",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#E64A19",
                    confirmButtonText: "Yup",
                    cancelButtonText: "Nope",
                    closeOnConfirm: false,
                    animation: true
                },
                function () {
                    $.ajax({
                        type: "GET",
                        url: "/notification/need-help/",
                        success: function (data) {
                            swal("Steward On The Way", "We Have Notified Steward.", "success");
                        },
                        error: function (response, error) {
                            swal("Error", "Server Issue :(", "error");
                        }
                    });
                });
        });

        $('.btn-no').click(function (e) {
            e.preventDefault();
            $('#snackbar').removeClass('show');
        });

        $('#logout').click(function () {
            swal({
                    title: "Are you sure?",
                    text: "We Will Gonna Miss You!",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "Logout!",
                    closeOnConfirm: false
                },
                function () {
                    swal("Success", "You Are Successfully Logout.", "success");
                    setTimeout(function () {
                        window.location.href = '/logout';
                    }, 1000);
                });
        });
    });

    $(document).ready(function () {
        Offline.options = {
            checkOnLoad: false,
            interceptRequests: true,
            reconnect: {
                initialDelay: 3
            },
            requests: true,
            game: false
        };
        Offline.options = {
            checks: {
                xhr: {
                    url: '/internet-check/'
                }
            }
        };
        setInterval(function () {
            if (Offline.state === 'up')
                Offline.check();
        }, 5000);
    });
</script>
<script>

    var product_list = [];

    $(document).ready(function () {
        $.ajax({
            type: 'GET',
            url: '/api/products/',
            success: function (data) {
                $.each(data, function (i, product) {
                    product_list.push(product);
                });
            }
        });

        $('#search').focus(function () {
            $('#search_result').show();
        });


        $('#search').keyup(function () {
            $('#search_result').find('ul').empty();

            var search_term = $(this).val();

            var search = search_term.toLowerCase();
            var array = jQuery.grep(product_list, function (value, i) {
                return value.title.toLowerCase().indexOf(search) >= 0;
            });
            $.each(array, function (i, arrq) {
                $('#search_result').find('ul').append("<li class='list-group-item'><a href='/products/" + arrq.id + "'>" + arrq.title + "</a></li>");
            });
        });
    });
</script>
</html>
